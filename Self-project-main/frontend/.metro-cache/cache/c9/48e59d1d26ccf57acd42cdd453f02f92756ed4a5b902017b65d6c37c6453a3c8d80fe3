{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":49,"index":139}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"../services/auth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":238},"end":{"line":5,"column":47,"index":285}}],"key":"eCE/Ns0hFZ8qUeRJVhBjpPpZz28=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"C:\\\\Users\\\\azhar\\\\college\\\\My Personal Projects\\\\Muyassir Phase 1\\\\Self-project-main\\\\frontend\\\\contexts\\\\AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoSecureStore = require(_dependencyMap[1], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[2], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _servicesAuth = require(_dependencyMap[3], \"../services/auth\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n\n  // Safe localStorage access for web\n  const getWebToken = () => {\n    try {\n      if (typeof window !== 'undefined' && window.localStorage) {\n        return window.localStorage.getItem('auth_token');\n      }\n    } catch (e) {\n      console.error('Error accessing localStorage:', e);\n    }\n    return null;\n  };\n  const removeWebToken = () => {\n    try {\n      if (typeof window !== 'undefined' && window.localStorage) {\n        window.localStorage.removeItem('auth_token');\n      }\n    } catch (e) {\n      console.error('Error removing from localStorage:', e);\n    }\n  };\n  const AuthProvider = ({\n    children\n  }) => {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        let token = null;\n        if (Platform.default.OS === 'web') {\n          // Use localStorage for web with safe access\n          token = getWebToken();\n        } else {\n          // Use SecureStore for native\n          token = await SecureStore.getItemAsync('auth_token');\n        }\n        if (token) {\n          const userData = await _servicesAuth.authService.getCurrentUser();\n          setUser(userData);\n        }\n      } catch (error) {\n        console.error('Auth check failed:', error);\n        try {\n          if (Platform.default.OS === 'web') {\n            removeWebToken();\n          } else {\n            await SecureStore.deleteItemAsync('auth_token');\n          }\n        } catch (e) {\n          // Ignore cleanup errors\n        }\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await _servicesAuth.authService.login(email, password);\n        setUser(response.user);\n      } catch (error) {\n        throw error;\n      }\n    };\n    const register = async data => {\n      try {\n        const response = await _servicesAuth.authService.register(data);\n        setUser(response.user);\n      } catch (error) {\n        throw error;\n      }\n    };\n    const logout = async () => {\n      try {\n        await _servicesAuth.authService.logout();\n        setUser(null);\n      } catch (error) {\n        console.error('Logout failed:', error);\n        // Force clear user state even on error\n        setUser(null);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        isLoading,\n        isAuthenticated: !!user,\n        login,\n        register,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }, this);\n  };\n  _s(AuthProvider, \"YajQB7LURzRD+QP5gw0+K2TZIWA=\");\n  _c = AuthProvider;\n  const useAuth = () => {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":164,"map":[[30,2,51,0,"Object"],[30,8,51,0],[30,9,51,0,"defineProperty"],[30,23,51,0],[30,24,51,0,"exports"],[30,31,51,0],[31,4,51,0,"enumerable"],[31,14,51,0],[32,4,51,0,"get"],[32,7,51,0],[32,18,51,0,"get"],[32,19,51,0],[33,6,51,0],[33,13,51,0,"AuthProvider"],[33,25,51,0],[34,4,51,0],[35,2,51,0],[36,2,136,0,"Object"],[36,8,136,0],[36,9,136,0,"defineProperty"],[36,23,136,0],[36,24,136,0,"exports"],[36,31,136,0],[37,4,136,0,"enumerable"],[37,14,136,0],[38,4,136,0,"get"],[38,7,136,0],[38,18,136,0,"get"],[38,19,136,0],[39,6,136,0],[39,13,136,0,"useAuth"],[39,20,136,0],[40,4,136,0],[41,2,136,0],[42,2,1,0],[42,6,1,0,"_react"],[42,12,1,0],[42,15,1,0,"require"],[42,22,1,0],[42,23,1,0,"_dependencyMap"],[42,37,1,0],[43,2,2,0],[43,6,2,0,"_expoSecureStore"],[43,22,2,0],[43,25,2,0,"require"],[43,32,2,0],[43,33,2,0,"_dependencyMap"],[43,47,2,0],[44,2,2,0],[44,6,2,0,"SecureStore"],[44,17,2,0],[44,20,2,0,"_interopNamespace"],[44,37,2,0],[44,38,2,0,"_expoSecureStore"],[44,54,2,0],[45,2,2,49],[45,6,2,49,"_reactNativeWebDistExportsPlatform"],[45,40,2,49],[45,43,2,49,"require"],[45,50,2,49],[45,51,2,49,"_dependencyMap"],[45,65,2,49],[46,2,2,49],[46,6,2,49,"Platform"],[46,14,2,49],[46,17,2,49,"_interopDefault"],[46,32,2,49],[46,33,2,49,"_reactNativeWebDistExportsPlatform"],[46,67,2,49],[47,2,5,0],[47,6,5,0,"_servicesAuth"],[47,19,5,0],[47,22,5,0,"require"],[47,29,5,0],[47,30,5,0,"_dependencyMap"],[47,44,5,0],[48,2,5,47],[48,6,5,47,"_reactJsxDevRuntime"],[48,25,5,47],[48,28,5,47,"require"],[48,35,5,47],[48,36,5,47,"_dependencyMap"],[48,50,5,47],[49,2,27,0],[49,8,27,6,"AuthContext"],[49,19,27,17],[49,35,27,20],[49,39,27,20,"createContext"],[49,45,27,33],[49,46,27,33,"createContext"],[49,59,27,33],[49,61,27,63,"undefined"],[49,70,27,72],[49,71,27,73],[51,2,29,0],[52,2,30,0],[52,8,30,6,"getWebToken"],[52,19,30,17],[52,22,30,20,"getWebToken"],[52,23,30,20],[52,28,30,41],[53,4,31,2],[53,8,31,6],[54,6,32,4],[54,10,32,8],[54,17,32,15,"window"],[54,23,32,21],[54,28,32,26],[54,39,32,37],[54,43,32,41,"window"],[54,49,32,47],[54,50,32,48,"localStorage"],[54,62,32,60],[54,64,32,62],[55,8,33,6],[55,15,33,13,"window"],[55,21,33,19],[55,22,33,20,"localStorage"],[55,34,33,32],[55,35,33,33,"getItem"],[55,42,33,40],[55,43,33,41],[55,55,33,53],[55,56,33,54],[56,6,34,4],[57,4,35,2],[57,5,35,3],[57,6,35,4],[57,13,35,11,"e"],[57,14,35,12],[57,16,35,14],[58,6,36,4,"console"],[58,13,36,11],[58,14,36,12,"error"],[58,19,36,17],[58,20,36,18],[58,51,36,49],[58,53,36,51,"e"],[58,54,36,52],[58,55,36,53],[59,4,37,2],[60,4,38,2],[60,11,38,9],[60,15,38,13],[61,2,39,0],[61,3,39,1],[62,2,41,0],[62,8,41,6,"removeWebToken"],[62,22,41,20],[62,25,41,23,"removeWebToken"],[62,26,41,23],[62,31,41,29],[63,4,42,2],[63,8,42,6],[64,6,43,4],[64,10,43,8],[64,17,43,15,"window"],[64,23,43,21],[64,28,43,26],[64,39,43,37],[64,43,43,41,"window"],[64,49,43,47],[64,50,43,48,"localStorage"],[64,62,43,60],[64,64,43,62],[65,8,44,6,"window"],[65,14,44,12],[65,15,44,13,"localStorage"],[65,27,44,25],[65,28,44,26,"removeItem"],[65,38,44,36],[65,39,44,37],[65,51,44,49],[65,52,44,50],[66,6,45,4],[67,4,46,2],[67,5,46,3],[67,6,46,4],[67,13,46,11,"e"],[67,14,46,12],[67,16,46,14],[68,6,47,4,"console"],[68,13,47,11],[68,14,47,12,"error"],[68,19,47,17],[68,20,47,18],[68,55,47,53],[68,57,47,55,"e"],[68,58,47,56],[68,59,47,57],[69,4,48,2],[70,2,49,0],[70,3,49,1],[71,2,51,7],[71,8,51,13,"AuthProvider"],[71,20,51,60],[71,23,51,63,"AuthProvider"],[71,24,51,64],[72,4,51,66,"children"],[73,2,51,75],[73,3,51,76],[73,8,51,81],[74,4,51,81,"_s"],[74,6,51,81],[75,4,52,2],[75,10,52,8],[75,11,52,9,"user"],[75,15,52,13],[75,17,52,15,"setUser"],[75,24,52,22],[75,25,52,23],[75,28,52,26],[75,32,52,26,"useState"],[75,38,52,34],[75,39,52,34,"useState"],[75,47,52,34],[75,49,52,48],[75,53,52,52],[75,54,52,53],[76,4,53,2],[76,10,53,8],[76,11,53,9,"isLoading"],[76,20,53,18],[76,22,53,20,"setIsLoading"],[76,34,53,32],[76,35,53,33],[76,38,53,36],[76,42,53,36,"useState"],[76,48,53,44],[76,49,53,44,"useState"],[76,57,53,44],[76,59,53,45],[76,63,53,49],[76,64,53,50],[77,4,55,2],[77,8,55,2,"useEffect"],[77,14,55,11],[77,15,55,11,"useEffect"],[77,24,55,11],[77,26,55,12],[77,32,55,18],[78,6,56,4,"checkAuth"],[78,15,56,13],[78,16,56,14],[78,17,56,15],[79,4,57,2],[79,5,57,3],[79,7,57,5],[79,9,57,7],[79,10,57,8],[80,4,59,2],[80,10,59,8,"checkAuth"],[80,19,59,17],[80,22,59,20],[80,28,59,20,"checkAuth"],[80,29,59,20],[80,34,59,32],[81,6,60,4],[81,10,60,8],[82,8,61,6],[82,12,61,10,"token"],[82,17,61,15],[82,20,61,18],[82,24,61,22],[83,8,63,6],[83,12,63,10,"Platform"],[83,20,63,18],[83,21,63,18,"default"],[83,28,63,18],[83,29,63,19,"OS"],[83,31,63,21],[83,36,63,26],[83,41,63,31],[83,43,63,33],[84,10,64,8],[85,10,65,8,"token"],[85,15,65,13],[85,18,65,16,"getWebToken"],[85,29,65,27],[85,30,65,28],[85,31,65,29],[86,8,66,6],[86,9,66,7],[86,15,66,13],[87,10,67,8],[88,10,68,8,"token"],[88,15,68,13],[88,18,68,16],[88,24,68,22,"SecureStore"],[88,35,68,33],[88,36,68,34,"getItemAsync"],[88,48,68,46],[88,49,68,47],[88,61,68,59],[88,62,68,60],[89,8,69,6],[90,8,71,6],[90,12,71,10,"token"],[90,17,71,15],[90,19,71,17],[91,10,72,8],[91,16,72,14,"userData"],[91,24,72,22],[91,27,72,25],[91,33,72,31,"authService"],[91,46,72,42],[91,47,72,42,"authService"],[91,58,72,42],[91,59,72,43,"getCurrentUser"],[91,73,72,57],[91,74,72,58],[91,75,72,59],[92,10,73,8,"setUser"],[92,17,73,15],[92,18,73,16,"userData"],[92,26,73,24],[92,27,73,25],[93,8,74,6],[94,6,75,4],[94,7,75,5],[94,8,75,6],[94,15,75,13,"error"],[94,20,75,18],[94,22,75,20],[95,8,76,6,"console"],[95,15,76,13],[95,16,76,14,"error"],[95,21,76,19],[95,22,76,20],[95,42,76,40],[95,44,76,42,"error"],[95,49,76,47],[95,50,76,48],[96,8,77,6],[96,12,77,10],[97,10,78,8],[97,14,78,12,"Platform"],[97,22,78,20],[97,23,78,20,"default"],[97,30,78,20],[97,31,78,21,"OS"],[97,33,78,23],[97,38,78,28],[97,43,78,33],[97,45,78,35],[98,12,79,10,"removeWebToken"],[98,26,79,24],[98,27,79,25],[98,28,79,26],[99,10,80,8],[99,11,80,9],[99,17,80,15],[100,12,81,10],[100,18,81,16,"SecureStore"],[100,29,81,27],[100,30,81,28,"deleteItemAsync"],[100,45,81,43],[100,46,81,44],[100,58,81,56],[100,59,81,57],[101,10,82,8],[102,8,83,6],[102,9,83,7],[102,10,83,8],[102,17,83,15,"e"],[102,18,83,16],[102,20,83,18],[103,10,84,8],[104,8,84,8],[105,6,86,4],[105,7,86,5],[105,16,86,14],[106,8,87,6,"setIsLoading"],[106,20,87,18],[106,21,87,19],[106,26,87,24],[106,27,87,25],[107,6,88,4],[108,4,89,2],[108,5,89,3],[109,4,91,2],[109,10,91,8,"login"],[109,15,91,13],[109,18,91,16],[109,24,91,16,"login"],[109,25,91,23,"email"],[109,30,91,36],[109,32,91,38,"password"],[109,40,91,54],[109,45,91,59],[110,6,92,4],[110,10,92,8],[111,8,93,6],[111,14,93,12,"response"],[111,22,93,34],[111,25,93,37],[111,31,93,43,"authService"],[111,44,93,54],[111,45,93,54,"authService"],[111,56,93,54],[111,57,93,55,"login"],[111,62,93,60],[111,63,93,61,"email"],[111,68,93,66],[111,70,93,68,"password"],[111,78,93,76],[111,79,93,77],[112,8,94,6,"setUser"],[112,15,94,13],[112,16,94,14,"response"],[112,24,94,22],[112,25,94,23,"user"],[112,29,94,27],[112,30,94,28],[113,6,95,4],[113,7,95,5],[113,8,95,6],[113,15,95,13,"error"],[113,20,95,18],[113,22,95,20],[114,8,96,6],[114,14,96,12,"error"],[114,19,96,17],[115,6,97,4],[116,4,98,2],[116,5,98,3],[117,4,100,2],[117,10,100,8,"register"],[117,18,100,16],[117,21,100,19],[117,27,100,26,"data"],[117,31,100,44],[117,35,100,49],[118,6,101,4],[118,10,101,8],[119,8,102,6],[119,14,102,12,"response"],[119,22,102,34],[119,25,102,37],[119,31,102,43,"authService"],[119,44,102,54],[119,45,102,54,"authService"],[119,56,102,54],[119,57,102,55,"register"],[119,65,102,63],[119,66,102,64,"data"],[119,70,102,68],[119,71,102,69],[120,8,103,6,"setUser"],[120,15,103,13],[120,16,103,14,"response"],[120,24,103,22],[120,25,103,23,"user"],[120,29,103,27],[120,30,103,28],[121,6,104,4],[121,7,104,5],[121,8,104,6],[121,15,104,13,"error"],[121,20,104,18],[121,22,104,20],[122,8,105,6],[122,14,105,12,"error"],[122,19,105,17],[123,6,106,4],[124,4,107,2],[124,5,107,3],[125,4,109,2],[125,10,109,8,"logout"],[125,16,109,14],[125,19,109,17],[125,25,109,17,"logout"],[125,26,109,17],[125,31,109,29],[126,6,110,4],[126,10,110,8],[127,8,111,6],[127,14,111,12,"authService"],[127,27,111,23],[127,28,111,23,"authService"],[127,39,111,23],[127,40,111,24,"logout"],[127,46,111,30],[127,47,111,31],[127,48,111,32],[128,8,112,6,"setUser"],[128,15,112,13],[128,16,112,14],[128,20,112,18],[128,21,112,19],[129,6,113,4],[129,7,113,5],[129,8,113,6],[129,15,113,13,"error"],[129,20,113,18],[129,22,113,20],[130,8,114,6,"console"],[130,15,114,13],[130,16,114,14,"error"],[130,21,114,19],[130,22,114,20],[130,38,114,36],[130,40,114,38,"error"],[130,45,114,43],[130,46,114,44],[131,8,115,6],[132,8,116,6,"setUser"],[132,15,116,13],[132,16,116,14],[132,20,116,18],[132,21,116,19],[133,6,117,4],[134,4,118,2],[134,5,118,3],[135,4,120,2],[135,24,121,4],[135,28,121,4,"_reactJsxDevRuntime"],[135,47,121,4],[135,48,121,4,"jsxDEV"],[135,54,121,4],[135,56,121,5,"AuthContext"],[135,67,121,16],[135,68,121,17,"Provider"],[135,76,121,25],[136,6,122,6,"value"],[136,11,122,11],[136,13,122,13],[137,8,123,8,"user"],[137,12,123,12],[138,8,124,8,"isLoading"],[138,17,124,17],[139,8,125,8,"isAuthenticated"],[139,23,125,23],[139,25,125,25],[139,26,125,26],[139,27,125,27,"user"],[139,31,125,31],[140,8,126,8,"login"],[140,13,126,13],[141,8,127,8,"register"],[141,16,127,16],[142,8,128,8,"logout"],[143,6,129,6],[143,7,129,8],[144,6,129,8,"children"],[144,14,129,8],[144,16,131,7,"children"],[145,4,131,15],[146,6,131,15,"fileName"],[146,14,131,15],[146,16,131,15,"_jsxFileName"],[146,28,131,15],[147,6,131,15,"lineNumber"],[147,16,131,15],[148,6,131,15,"columnNumber"],[148,18,131,15],[149,4,131,15],[149,11,132,26],[149,12,132,27],[150,2,134,0],[150,3,134,1],[151,2,134,2,"_s"],[151,4,134,2],[151,5,51,13,"AuthProvider"],[151,17,51,60],[152,2,51,60,"_c"],[152,4,51,60],[152,7,51,13,"AuthProvider"],[152,19,51,60],[153,2,136,7],[153,8,136,13,"useAuth"],[153,15,136,20],[153,18,136,23,"useAuth"],[153,19,136,23],[153,24,136,29],[154,4,136,29,"_s2"],[154,7,136,29],[155,4,137,2],[155,10,137,8,"context"],[155,17,137,15],[155,20,137,18],[155,24,137,18,"useContext"],[155,30,137,28],[155,31,137,28,"useContext"],[155,41,137,28],[155,43,137,29,"AuthContext"],[155,54,137,40],[155,55,137,41],[156,4,138,2],[156,8,138,6],[156,9,138,7,"context"],[156,16,138,14],[156,18,138,16],[157,6,139,4],[157,12,139,10],[157,16,139,14,"Error"],[157,21,139,19],[157,22,139,20],[157,64,139,62],[157,65,139,63],[158,4,140,2],[159,4,141,2],[159,11,141,9,"context"],[159,18,141,16],[160,2,142,0],[160,3,142,1],[161,2,142,2,"_s2"],[161,5,142,2],[161,6,136,13,"useAuth"],[161,13,136,20],[162,2,136,20],[162,6,136,20,"_c"],[162,8,136,20],[163,2,136,20,"$RefreshReg$"],[163,14,136,20],[163,15,136,20,"_c"],[163,17,136,20],[164,0,136,20],[164,3]],"functionMap":{"names":["<global>","getWebToken","removeWebToken","AuthProvider","useEffect$argument_0","checkAuth","login","register","logout","useAuth"],"mappings":"AAA;oBC6B;CDS;uBEE;CFQ;+DGE;YCI;GDE;oBEE;GF8B;gBGE;GHO;mBIE;GJO;iBKE;GLS;CHgB;uBSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}