{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":89,"index":89}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":90},"end":{"line":2,"column":49,"index":139}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"../services/auth","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":238},"end":{"line":5,"column":47,"index":285}}],"key":"eCE/Ns0hFZ8qUeRJVhBjpPpZz28=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"C:\\\\Users\\\\azhar\\\\college\\\\My Personal Projects\\\\Muyassir Phase 1\\\\Self-project-main\\\\frontend\\\\contexts\\\\AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoSecureStore = require(_dependencyMap[1], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[2], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _servicesAuth = require(_dependencyMap[3], \"../services/auth\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n\n  // Safe localStorage access for web\n  const getWebToken = () => {\n    try {\n      if (false && window.localStorage) {\n        return window.localStorage.getItem('auth_token');\n      }\n    } catch (e) {\n      console.error('Error accessing localStorage:', e);\n    }\n    return null;\n  };\n  const removeWebToken = () => {\n    try {\n      if (false && window.localStorage) {\n        window.localStorage.removeItem('auth_token');\n      }\n    } catch (e) {\n      console.error('Error removing from localStorage:', e);\n    }\n  };\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkAuth();\n    }, []);\n    const checkAuth = async () => {\n      try {\n        let token = null;\n        if (Platform.default.OS === 'web') {\n          // Use localStorage for web with safe access\n          token = getWebToken();\n        } else {\n          // Use SecureStore for native\n          token = await SecureStore.getItemAsync('auth_token');\n        }\n        if (token) {\n          const userData = await _servicesAuth.authService.getCurrentUser();\n          setUser(userData);\n        }\n      } catch (error) {\n        console.error('Auth check failed:', error);\n        try {\n          if (Platform.default.OS === 'web') {\n            removeWebToken();\n          } else {\n            await SecureStore.deleteItemAsync('auth_token');\n          }\n        } catch (e) {\n          // Ignore cleanup errors\n        }\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await _servicesAuth.authService.login(email, password);\n        setUser(response.user);\n      } catch (error) {\n        throw error;\n      }\n    };\n    const register = async data => {\n      try {\n        const response = await _servicesAuth.authService.register(data);\n        setUser(response.user);\n      } catch (error) {\n        throw error;\n      }\n    };\n    const logout = async () => {\n      try {\n        await _servicesAuth.authService.logout();\n        setUser(null);\n      } catch (error) {\n        console.error('Logout failed:', error);\n        // Force clear user state even on error\n        setUser(null);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        isLoading,\n        isAuthenticated: !!user,\n        login,\n        register,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (!context) {\n      throw new Error('useAuth must be used within AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":155,"map":[[28,2,51,0,"Object"],[28,8,51,0],[28,9,51,0,"defineProperty"],[28,23,51,0],[28,24,51,0,"exports"],[28,31,51,0],[29,4,51,0,"enumerable"],[29,14,51,0],[30,4,51,0,"get"],[30,7,51,0],[30,18,51,0,"get"],[30,19,51,0],[31,6,51,0],[31,13,51,0,"AuthProvider"],[31,25,51,0],[32,4,51,0],[33,2,51,0],[34,2,136,0,"Object"],[34,8,136,0],[34,9,136,0,"defineProperty"],[34,23,136,0],[34,24,136,0,"exports"],[34,31,136,0],[35,4,136,0,"enumerable"],[35,14,136,0],[36,4,136,0,"get"],[36,7,136,0],[36,18,136,0,"get"],[36,19,136,0],[37,6,136,0],[37,13,136,0,"useAuth"],[37,20,136,0],[38,4,136,0],[39,2,136,0],[40,2,1,0],[40,6,1,0,"_react"],[40,12,1,0],[40,15,1,0,"require"],[40,22,1,0],[40,23,1,0,"_dependencyMap"],[40,37,1,0],[41,2,2,0],[41,6,2,0,"_expoSecureStore"],[41,22,2,0],[41,25,2,0,"require"],[41,32,2,0],[41,33,2,0,"_dependencyMap"],[41,47,2,0],[42,2,2,0],[42,6,2,0,"SecureStore"],[42,17,2,0],[42,20,2,0,"_interopNamespace"],[42,37,2,0],[42,38,2,0,"_expoSecureStore"],[42,54,2,0],[43,2,2,49],[43,6,2,49,"_reactNativeWebDistExportsPlatform"],[43,40,2,49],[43,43,2,49,"require"],[43,50,2,49],[43,51,2,49,"_dependencyMap"],[43,65,2,49],[44,2,2,49],[44,6,2,49,"Platform"],[44,14,2,49],[44,17,2,49,"_interopDefault"],[44,32,2,49],[44,33,2,49,"_reactNativeWebDistExportsPlatform"],[44,67,2,49],[45,2,5,0],[45,6,5,0,"_servicesAuth"],[45,19,5,0],[45,22,5,0,"require"],[45,29,5,0],[45,30,5,0,"_dependencyMap"],[45,44,5,0],[46,2,5,47],[46,6,5,47,"_reactJsxDevRuntime"],[46,25,5,47],[46,28,5,47,"require"],[46,35,5,47],[46,36,5,47,"_dependencyMap"],[46,50,5,47],[47,2,27,0],[47,8,27,6,"AuthContext"],[47,19,27,17],[47,35,27,20],[47,39,27,20,"createContext"],[47,45,27,33],[47,46,27,33,"createContext"],[47,59,27,33],[47,61,27,63,"undefined"],[47,70,27,72],[47,71,27,73],[49,2,29,0],[50,2,30,0],[50,8,30,6,"getWebToken"],[50,19,30,17],[50,22,30,20,"getWebToken"],[50,23,30,20],[50,28,30,41],[51,4,31,2],[51,8,31,6],[52,6,32,4],[52,10,32,8],[52,19,32,41,"window"],[52,25,32,47],[52,26,32,48,"localStorage"],[52,38,32,60],[52,40,32,62],[53,8,33,6],[53,15,33,13,"window"],[53,21,33,19],[53,22,33,20,"localStorage"],[53,34,33,32],[53,35,33,33,"getItem"],[53,42,33,40],[53,43,33,41],[53,55,33,53],[53,56,33,54],[54,6,34,4],[55,4,35,2],[55,5,35,3],[55,6,35,4],[55,13,35,11,"e"],[55,14,35,12],[55,16,35,14],[56,6,36,4,"console"],[56,13,36,11],[56,14,36,12,"error"],[56,19,36,17],[56,20,36,18],[56,51,36,49],[56,53,36,51,"e"],[56,54,36,52],[56,55,36,53],[57,4,37,2],[58,4,38,2],[58,11,38,9],[58,15,38,13],[59,2,39,0],[59,3,39,1],[60,2,41,0],[60,8,41,6,"removeWebToken"],[60,22,41,20],[60,25,41,23,"removeWebToken"],[60,26,41,23],[60,31,41,29],[61,4,42,2],[61,8,42,6],[62,6,43,4],[62,10,43,8],[62,19,43,41,"window"],[62,25,43,47],[62,26,43,48,"localStorage"],[62,38,43,60],[62,40,43,62],[63,8,44,6,"window"],[63,14,44,12],[63,15,44,13,"localStorage"],[63,27,44,25],[63,28,44,26,"removeItem"],[63,38,44,36],[63,39,44,37],[63,51,44,49],[63,52,44,50],[64,6,45,4],[65,4,46,2],[65,5,46,3],[65,6,46,4],[65,13,46,11,"e"],[65,14,46,12],[65,16,46,14],[66,6,47,4,"console"],[66,13,47,11],[66,14,47,12,"error"],[66,19,47,17],[66,20,47,18],[66,55,47,53],[66,57,47,55,"e"],[66,58,47,56],[66,59,47,57],[67,4,48,2],[68,2,49,0],[68,3,49,1],[69,2,51,7],[69,8,51,13,"AuthProvider"],[69,20,51,60],[69,23,51,63,"AuthProvider"],[69,24,51,64],[70,4,51,66,"children"],[71,2,51,75],[71,3,51,76],[71,8,51,81],[72,4,52,2],[72,10,52,8],[72,11,52,9,"user"],[72,15,52,13],[72,17,52,15,"setUser"],[72,24,52,22],[72,25,52,23],[72,28,52,26],[72,32,52,26,"useState"],[72,38,52,34],[72,39,52,34,"useState"],[72,47,52,34],[72,49,52,48],[72,53,52,52],[72,54,52,53],[73,4,53,2],[73,10,53,8],[73,11,53,9,"isLoading"],[73,20,53,18],[73,22,53,20,"setIsLoading"],[73,34,53,32],[73,35,53,33],[73,38,53,36],[73,42,53,36,"useState"],[73,48,53,44],[73,49,53,44,"useState"],[73,57,53,44],[73,59,53,45],[73,63,53,49],[73,64,53,50],[74,4,55,2],[74,8,55,2,"useEffect"],[74,14,55,11],[74,15,55,11,"useEffect"],[74,24,55,11],[74,26,55,12],[74,32,55,18],[75,6,56,4,"checkAuth"],[75,15,56,13],[75,16,56,14],[75,17,56,15],[76,4,57,2],[76,5,57,3],[76,7,57,5],[76,9,57,7],[76,10,57,8],[77,4,59,2],[77,10,59,8,"checkAuth"],[77,19,59,17],[77,22,59,20],[77,28,59,20,"checkAuth"],[77,29,59,20],[77,34,59,32],[78,6,60,4],[78,10,60,8],[79,8,61,6],[79,12,61,10,"token"],[79,17,61,15],[79,20,61,18],[79,24,61,22],[80,8,63,6],[80,12,63,10,"Platform"],[80,20,63,18],[80,21,63,18,"default"],[80,28,63,18],[80,29,63,19,"OS"],[80,31,63,21],[80,36,63,26],[80,41,63,31],[80,43,63,33],[81,10,64,8],[82,10,65,8,"token"],[82,15,65,13],[82,18,65,16,"getWebToken"],[82,29,65,27],[82,30,65,28],[82,31,65,29],[83,8,66,6],[83,9,66,7],[83,15,66,13],[84,10,67,8],[85,10,68,8,"token"],[85,15,68,13],[85,18,68,16],[85,24,68,22,"SecureStore"],[85,35,68,33],[85,36,68,34,"getItemAsync"],[85,48,68,46],[85,49,68,47],[85,61,68,59],[85,62,68,60],[86,8,69,6],[87,8,71,6],[87,12,71,10,"token"],[87,17,71,15],[87,19,71,17],[88,10,72,8],[88,16,72,14,"userData"],[88,24,72,22],[88,27,72,25],[88,33,72,31,"authService"],[88,46,72,42],[88,47,72,42,"authService"],[88,58,72,42],[88,59,72,43,"getCurrentUser"],[88,73,72,57],[88,74,72,58],[88,75,72,59],[89,10,73,8,"setUser"],[89,17,73,15],[89,18,73,16,"userData"],[89,26,73,24],[89,27,73,25],[90,8,74,6],[91,6,75,4],[91,7,75,5],[91,8,75,6],[91,15,75,13,"error"],[91,20,75,18],[91,22,75,20],[92,8,76,6,"console"],[92,15,76,13],[92,16,76,14,"error"],[92,21,76,19],[92,22,76,20],[92,42,76,40],[92,44,76,42,"error"],[92,49,76,47],[92,50,76,48],[93,8,77,6],[93,12,77,10],[94,10,78,8],[94,14,78,12,"Platform"],[94,22,78,20],[94,23,78,20,"default"],[94,30,78,20],[94,31,78,21,"OS"],[94,33,78,23],[94,38,78,28],[94,43,78,33],[94,45,78,35],[95,12,79,10,"removeWebToken"],[95,26,79,24],[95,27,79,25],[95,28,79,26],[96,10,80,8],[96,11,80,9],[96,17,80,15],[97,12,81,10],[97,18,81,16,"SecureStore"],[97,29,81,27],[97,30,81,28,"deleteItemAsync"],[97,45,81,43],[97,46,81,44],[97,58,81,56],[97,59,81,57],[98,10,82,8],[99,8,83,6],[99,9,83,7],[99,10,83,8],[99,17,83,15,"e"],[99,18,83,16],[99,20,83,18],[100,10,84,8],[101,8,84,8],[102,6,86,4],[102,7,86,5],[102,16,86,14],[103,8,87,6,"setIsLoading"],[103,20,87,18],[103,21,87,19],[103,26,87,24],[103,27,87,25],[104,6,88,4],[105,4,89,2],[105,5,89,3],[106,4,91,2],[106,10,91,8,"login"],[106,15,91,13],[106,18,91,16],[106,24,91,16,"login"],[106,25,91,23,"email"],[106,30,91,36],[106,32,91,38,"password"],[106,40,91,54],[106,45,91,59],[107,6,92,4],[107,10,92,8],[108,8,93,6],[108,14,93,12,"response"],[108,22,93,34],[108,25,93,37],[108,31,93,43,"authService"],[108,44,93,54],[108,45,93,54,"authService"],[108,56,93,54],[108,57,93,55,"login"],[108,62,93,60],[108,63,93,61,"email"],[108,68,93,66],[108,70,93,68,"password"],[108,78,93,76],[108,79,93,77],[109,8,94,6,"setUser"],[109,15,94,13],[109,16,94,14,"response"],[109,24,94,22],[109,25,94,23,"user"],[109,29,94,27],[109,30,94,28],[110,6,95,4],[110,7,95,5],[110,8,95,6],[110,15,95,13,"error"],[110,20,95,18],[110,22,95,20],[111,8,96,6],[111,14,96,12,"error"],[111,19,96,17],[112,6,97,4],[113,4,98,2],[113,5,98,3],[114,4,100,2],[114,10,100,8,"register"],[114,18,100,16],[114,21,100,19],[114,27,100,26,"data"],[114,31,100,44],[114,35,100,49],[115,6,101,4],[115,10,101,8],[116,8,102,6],[116,14,102,12,"response"],[116,22,102,34],[116,25,102,37],[116,31,102,43,"authService"],[116,44,102,54],[116,45,102,54,"authService"],[116,56,102,54],[116,57,102,55,"register"],[116,65,102,63],[116,66,102,64,"data"],[116,70,102,68],[116,71,102,69],[117,8,103,6,"setUser"],[117,15,103,13],[117,16,103,14,"response"],[117,24,103,22],[117,25,103,23,"user"],[117,29,103,27],[117,30,103,28],[118,6,104,4],[118,7,104,5],[118,8,104,6],[118,15,104,13,"error"],[118,20,104,18],[118,22,104,20],[119,8,105,6],[119,14,105,12,"error"],[119,19,105,17],[120,6,106,4],[121,4,107,2],[121,5,107,3],[122,4,109,2],[122,10,109,8,"logout"],[122,16,109,14],[122,19,109,17],[122,25,109,17,"logout"],[122,26,109,17],[122,31,109,29],[123,6,110,4],[123,10,110,8],[124,8,111,6],[124,14,111,12,"authService"],[124,27,111,23],[124,28,111,23,"authService"],[124,39,111,23],[124,40,111,24,"logout"],[124,46,111,30],[124,47,111,31],[124,48,111,32],[125,8,112,6,"setUser"],[125,15,112,13],[125,16,112,14],[125,20,112,18],[125,21,112,19],[126,6,113,4],[126,7,113,5],[126,8,113,6],[126,15,113,13,"error"],[126,20,113,18],[126,22,113,20],[127,8,114,6,"console"],[127,15,114,13],[127,16,114,14,"error"],[127,21,114,19],[127,22,114,20],[127,38,114,36],[127,40,114,38,"error"],[127,45,114,43],[127,46,114,44],[128,8,115,6],[129,8,116,6,"setUser"],[129,15,116,13],[129,16,116,14],[129,20,116,18],[129,21,116,19],[130,6,117,4],[131,4,118,2],[131,5,118,3],[132,4,120,2],[132,24,121,4],[132,28,121,4,"_reactJsxDevRuntime"],[132,47,121,4],[132,48,121,4,"jsxDEV"],[132,54,121,4],[132,56,121,5,"AuthContext"],[132,67,121,16],[132,68,121,17,"Provider"],[132,76,121,25],[133,6,122,6,"value"],[133,11,122,11],[133,13,122,13],[134,8,123,8,"user"],[134,12,123,12],[135,8,124,8,"isLoading"],[135,17,124,17],[136,8,125,8,"isAuthenticated"],[136,23,125,23],[136,25,125,25],[136,26,125,26],[136,27,125,27,"user"],[136,31,125,31],[137,8,126,8,"login"],[137,13,126,13],[138,8,127,8,"register"],[138,16,127,16],[139,8,128,8,"logout"],[140,6,129,6],[140,7,129,8],[141,6,129,8,"children"],[141,14,129,8],[141,16,131,7,"children"],[142,4,131,15],[143,6,131,15,"fileName"],[143,14,131,15],[143,16,131,15,"_jsxFileName"],[143,28,131,15],[144,6,131,15,"lineNumber"],[144,16,131,15],[145,6,131,15,"columnNumber"],[145,18,131,15],[146,4,131,15],[146,11,132,26],[146,12,132,27],[147,2,134,0],[147,3,134,1],[148,2,136,7],[148,8,136,13,"useAuth"],[148,15,136,20],[148,18,136,23,"useAuth"],[148,19,136,23],[148,24,136,29],[149,4,137,2],[149,10,137,8,"context"],[149,17,137,15],[149,20,137,18],[149,24,137,18,"useContext"],[149,30,137,28],[149,31,137,28,"useContext"],[149,41,137,28],[149,43,137,29,"AuthContext"],[149,54,137,40],[149,55,137,41],[150,4,138,2],[150,8,138,6],[150,9,138,7,"context"],[150,16,138,14],[150,18,138,16],[151,6,139,4],[151,12,139,10],[151,16,139,14,"Error"],[151,21,139,19],[151,22,139,20],[151,64,139,62],[151,65,139,63],[152,4,140,2],[153,4,141,2],[153,11,141,9,"context"],[153,18,141,16],[154,2,142,0],[154,3,142,1],[155,0,142,2],[155,3]],"functionMap":{"names":["<global>","getWebToken","removeWebToken","AuthProvider","useEffect$argument_0","checkAuth","login","register","logout","useAuth"],"mappings":"AAA;oBC6B;CDS;uBEE;CFQ;+DGE;YCI;GDE;oBEE;GF8B;gBGE;GHO;mBIE;GJO;iBKE;GLS;CHgB;uBSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}